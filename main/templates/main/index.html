{% extends 'base.html' %}

{% block main %}

<h1 class="mt-5">Garmin Health API</h1>

{% if not request.user.is_authenticated %}
<div class="row">
  <div class="col-md">
    <p>
      Connect to your <i>Open Humans</i> account to store location data from the <i>Garmin Health API</i>.
    </p>
    <a href="{{ auth_url }}" class="btn btn-primary">Connect to Open Humans</a>
  </div>
  <div class="col-md">
    <h2>What is the <i>Garmin Health API</i>?</h2>
    TODO
    <h2>What does this website do?</h2>
    <p>
    If you log in with your <i>Open Humans</i> account you can use this app to transfer your <i>Garmin Health API</i> location data to your <i>Open Humans</i> account.
    </p>
    <p>This project is run by <a href="https://openhumansfoundation.org/">the Open Humans Foundation</a> and governed by the
      <a href="https://www.openhumans.org/terms/">Open Humans terms of use</a>.
    </p>
    <p>
      You can read more about its code, operation, and data management in our <a href='{% url 'about' %}'>About/FAQ page</a>.</p>
    <h2>Will <i>Open Humans</i> make my data publicly available?</h2>
    <p>
    The short answer: No.<br>
    The long answer: Data is private by default. If you want to, you can opt to make data sets publicly available on <i>Open Humans</i> and/or share it with other projects, but you can always keep data private.
    </p>
  </div>
</div>
{% else %}

<div class="row">
  <div class="col-md">
    <h3>Your Garmin Health data</h3>
    {%if is_garmin_member%}
    <p>Your account has been connected to Garmin Health</p>
    <p><a href="{{ overland_file }}" class="btn btn-primary">Download your Data</a></p>

        DEBUG: authorize again <a href="/garmin/authorize/" class="btn btn-primary">Connect to Garmin Health</a>

    {%else%}
    <p>You don't have any Garmin Health data in your Open Humans account so far.
      Follow the steps below to start recording data:</p>
    <a href="/garmin/authorize/" class="btn btn-primary">Connect to Garmin Health</a>

    {%endif%}
    <p>
      TODO
    </p>
  </div>

  {% load static %}
  </div>


{% endif %}

{% endblock main %}
